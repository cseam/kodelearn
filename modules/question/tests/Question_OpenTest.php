<?php defined('SYSPATH') or die('No direct access allowed.');

class Question_OpenTest extends Kohana_UnitTest_TestCase {

    public function test_process_attrs() {
        $formdata = array(
            'answer' => 'This is the correct answer',
            'explain' => 'very obvious'
        );
        $question = Question::factory('open');
        $attributes = $question->process_attrs($formdata);
        $this->assertEquals($attributes, array(
            0 => array(
                'attribute_name' => 'answer',
                'attribute_value' => 'This is the correct answer',
                'correctness' => 1,
                'explanation' => 'very obvious'
            )
        ));
    }

    public function test_check_answer() {
        $ques = ORM::factory('question', 5);        
        $question = Question::factory($ques);
        $submitted = 5;
        $this->assertTrue($question->check_answer($submitted));
    }
}